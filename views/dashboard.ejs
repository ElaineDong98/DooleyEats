<!DOCTYPE html>
<style>
    /*This is modifying the btn-primary colors but you could create your own .btn-something class as well*/
    .btn-primary {
        color: black;
        background-color: #ccddf5;
        border-color: gray; /*set the color you want here*/
    }
    .btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active ,.btn-primary:active:focus , .open>.dropdown-toggle.btn-primary {
        color: black;
        background-color: rgb(39, 97, 223);
        border-color: #adadad;
    }
    
  body
  {
    color : black;
    /*background-color: #232323 ;*/
  background: #0b635e; 
   /*fallback for old browsers */
   /* Chrome 10-25, Safari 5.1-6 */
  background: -webkit-linear-gradient(to right, #f1d685 , #f7eee4); 
   /*W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
  background: linear-gradient(to right, #c0bdb4 , #f7eee4); 
  
  }
  </style>
  
<html>
<title>Dooley Eats Homepage</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Karma", sans-serif}
.w3-bar-block .w3-bar-item {padding:20px}
br {
   display: block;
   margin: 5px 0;
}
</style>
<body>
<% include ./partials/messages %>

<!-- Top menu -->
<div class="w3-top">
  <div class="w3-light-gray w3-xlarge" style="max-width:1100px;margin:left">
    <div class="w3-large w3-button w3-padding-16 w3-left" onclick="w3_open()"></div>
    <div class="w3-right w3-padding-16 ">
      <button class="btn btn-sm btn-outline-success my-2 my-sm-1" type="submit">
        <a class="lead " href="/posts/new_post">+ create new post</a>
      </button>
      <br style="line-height:3px">
      
      <form action="/posts" method="GET" class="form-inline">
      <input class="form-control mr-sm-2" type="search" name = "search" placeholder="Search" aria-label="Search" />
      <button class="btn btn-outline-success my-2 my-sm-0 btn-sm" type="submit">
        Search
      </button>
      </form>
      </div>
    
    <div class="w3-left w3-padding-16 ">
        <p class="lead mb-3"><a href = "/users/<%= currUser._id %>" >Welcome <%= username%>!  </a>
        </p>
        <a href="/users/logout" class="btn btn-outline-secondary btn-sm">Sign Out</a>
        
    </div>
    <!-- <div class="w3-left w3-padding-16"><a href = "login.html" >Login/ </a></div>
    <div class="w3-left w3-padding-16"><a href = "register.html" > Register</a></div> -->
    <div class="w3-center w3-padding-16"><img src="https://qiaolin22.github.io/login/static/image/logo.png" alt="Logo" style="width:8%"></div>
  </div>
</div><br><br><br><br>

<!-- !PAGE CONTENT! -->
<div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px">
    <div>
        <span style="color:rgb(88, 6, 88); font-size: 150%"><a href="/posts/">View all posts here</a></span>
    </div>
    <hr>
  <div>

<h2>Trending Posts</h2>

<!-- Second Photo Grid-->
    <div class="row text-center" style="display: flex; flex-wrap: wrap;" id="Trending_Restaurants">
      <%posts.sort(function (a, b) {
        if (a.likes && b.likes){
          if (a.likes.length == b.likes.length){
            if (a.view == b.view){
              return b.createdAt - a.createdAt;
            }
            return b.view - a.view;
          }
          return b.likes.length - a.likes.length;
          
        }
        
        if (!a.likes){
          return 1;
        }
        })%>
        <% var j = 0; 
        for (var i = 0; i < 8; i++) { 
           if (posts[i+j].postType == "HangOut") {
            j += 1;
            i -= 1; 
            continue;}%>
          <div class="col-md-3 col-sm-6">
            <div class="thumbnail card" style="background-color:rgba(245, 207, 138, 0.425)">
              <img src="<%= posts[i].image %>" class="gallery-image" alt="" style="width:100%">
              <div class="caption">
                <h4 class="caption"><%= posts[i+j].title %></h4>
              </div>
              <p>
                <a class="btn btn-primary btn-sm btn-b-mg" href="/Posts/<%= posts[i]._id %>">
                  More Info
                </a >
              </p >
              <div>
                <span class="badge label-primary"><i class="fas fa-heart" style="color:red"></i> <%= posts[i+j].likes.length %></span>
                <span class="badge label-primary"><i class="fas fa-eye" style="color:yellowgreen"></i> <%= posts[i+j].view-1 %></span>
              </div>
                <em>Submitted By <a href="/users/<%= posts[i].author.id %>"><%= posts[i+j].author.username %></a></em>
            <span>Date: <%= posts[i+j].createdAt.toDateString() %></span>
            </div> <br><br><br><br><br><br>
          </div>
        <% } %>
      </div>  
    </div>  
    <hr>
  
  <h2>Newest Posts</h2>
  <!-- first Photo Grid-->
    <div class="row text-center" style="display: flex; flex-wrap: wrap;" id="Trending_Restaurants">
      <%posts.sort(function (a, b) {
        if (a.createdAt && b.createdAt){
          return b.createdAt - a.createdAt;
        }
        if (!a.createdAt){
          return 1;
        }
        })%>
        <% var j = 0; 
                for (var i = 0; i < 8; i++) { 
                   if (posts[i+j].postType == "HangOut") {
                    j += 1;
                    i -= 1; 
                    continue;}%>
        <div class="col-md-3 col-sm-6">
          <div class="thumbnail card" style="background-color:rgba(203, 248, 152, 0.425)">
            <img src="<%= posts[i].image %>" class="gallery-image" alt="" style="width:100%">
            <div class="caption">
              <h4 class="caption"><%= posts[i+j].title %></h4>
            </div>
            <p>
              <a class="btn btn-primary btn-sm btn-b-mg" href="/Posts/<%= posts[i+j]._id %>">
                More Info
              </a >
            </p >
            <div>
              <span class="badge label-primary"><i class="fas fa-heart" style="color:red"></i> <%= posts[i+j].likes.length %></span>
              <span class="badge label-primary"><i class="fas fa-eye" style="color:yellowgreen"></i> <%= posts[i+j].view -1%></span>
            </div>
              <em>Submitted By <a href="/users/<%= posts[i+j].author.id %>"><%= posts[i+j].author.username %></a></em>
          <span>Date: <%= posts[i+j].createdAt.toDateString() %></span>
          </div> <br><br><br><br><br><br>
        </div>
      <% } %>
    </div>  
  </div>
  <hr>
  
  <div class="w3-container w3-padding-32">
    <div style="background-color:rgba(196, 236, 247, 0.39)">
  <h2>HangOut</h2>
  <%posts.sort(function (a, b) {
              if (a.createdAt && b.createdAt){return b.createdAt - a.createdAt;}
              if (!a.createdAt){return 1;}})%>
  <% for (var i = 0; i < 4; i++) { %>
  <% if(posts[i].postType == "HangOut") { %>
  <div class="w3-padding-32">
    <img style="width:100%">
    <h3><a href="/posts/<%= posts[i]._id %>" target="_blank"><%= posts[i].title %></a>
    </h3>
    <p><%= posts[i].description.substring(0, 50) %></p>
  </div>
  <% } %><% } %>
    <div class="w3-padding-32">
            <img style="width:100%">
            <h3><a href="/Posts/5dc72c61dbc1da614db44c16" target="_blank">Free Pepperoni Pizze At Blaze Pizza!!!</a></h3>
            <p>Anyone want to grab a free pizza together tomorrow at 12pm? Blaze Pizza has a... </p>
          </div>
    <div class="w3-padding-32">
        <img style="width:100%">
        <h3><a href="/Posts/5dc72f1ddbc1da614db44c17" target="_blank">Anyone want to go to GreatWall Supermarket in Duluth?</a></h3>
        <p>Next Sunday 6pm. Anyone wants to uber to... </p>
      </div>
    </div>



    </div>
  </div>
  <hr>

  <!-- Social Networks -->
  <footer class="w3-row-padding w3-padding-32">
    <div class="w3-third">
      <h3>FOLLOW US</h3>
      <ul class="w3-ul w3-hoverable">
        <li class="w3-padding-16">
          <img src="https://qiaolin22.github.io/login/static/image/facebook-icon.svg" alt="Facebook" style="width:10%">
          <span class="w3-large"><a href="https://Facebook.com" target="_blank">Facebook</a></span><br>
        </li>
        <li class="w3-padding-16">
          <img src="https://qiaolin22.github.io/login/static/image/Twitter.png" alt="Twitter" style="width:10%">
          <span class="w3-large"><a href="https://Twitter.com" target="_blank">Twitter</a></span><br>
        </li>
        <li class="w3-padding-16">
          <img src="https://qiaolin22.github.io/login/static/image/instagram_icon.jpeg" alt="Instagram" style="width:10%">
          <span class="w3-large"><a href="https://Instagram.com" target="_blank">Instagram</a></span><br>
        </li>
      </ul>
      <p>Powered by <a href=/dashboard>Team 0100.0</a></p>
    </div>

    <div class="w3-third">
      <h3>BLOG POSTS</h3>
      <ul class="w3-ul w3-hoverable">
        <li class="w3-padding-16">
          <img src="https://qiaolin22.github.io/login/static/image/blog-icon.png" class="w3-left w3-margin-right" style="width:50px">
          <span class="w3-large">Food Posts</span><br>
          <span><a href = "/posts" >View All Posts Here</a></span>
        </li>
        <li class="w3-padding-16">
          <img src="https://qiaolin22.github.io/login/static/image/blog_icon2.png" class="w3-left w3-margin-right" style="width:50px">
          <span class="w3-large">Discussions</span><br>
          <span><a href = "/forum" >Discussions go here:</a></span>
        </li>
      </ul>
    </div>

    <div class="w3-third w3-serif">
      <h3>POPULAR TAGS</h3>
      <p>
        <a class="w3-tag w3-dark-grey w3-small w3-margin-bottom" href="http://localhost:5000/posts?search=Emory">Emory</a> 
        <a class="w3-tag w3-dark-grey w3-small w3-margin-bottom" href="http://localhost:5000/posts?search=Recipe">Recipe</a> 
        <a class="w3-tag w3-dark-grey w3-small w3-margin-bottom" href="http://localhost:5000/posts?search=Pizza">Pizza</a> 
        <a class="w3-tag w3-dark-grey w3-small w3-margin-bottom" href="http://localhost:5000/posts?search=Sauce">Sauce</a> 
      </p>
    </div>

    
  </footer>

<!-- End page content -->
</div>
</div>


<script>
// Script to open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
}

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
}
</script>

</body>
</html>
